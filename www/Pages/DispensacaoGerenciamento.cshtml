@page
@model www.Pages.DispensacaoGerenciamentoModel
@{
    ViewData["Title"] = "Gerenciamento de Dispensação";
}

<style>
    .top-right-button {
        float: right;
    }

    .table-container {
        margin-top: 20px;
    }

    .title-icon {
        display: flex;
        align-items: center;
    }

    .title-icon i {
        margin-right: 10px;
    }

    .table-responsive {
        overflow-x: auto;
    }

    .table th, .table td {
        vertical-align: middle;
        text-align: left; /* Alinhamento à esquerda */
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }

    .nomePaciente, .codigo, .status, .cid, .inicioApac, .fimApac {
        max-width: 150px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }

    .observacao {
        max-width: 250px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
    }

    @@media (max-width: 768px) {
        .nomePaciente, .inicioApac, .status {
            max-width: 150px;
        }

        .top-right-button {
            float: none;
            width: 100%;
            margin-top: 10px;
        }

        .title-icon h1 {
            font-size: 1.5rem;
        }
    }

    #loading {
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 1000;
    }

    .spinner-border {
        width: 3rem;
        height: 3rem;
    }
</style>

<div class="row">
    <div class="col title-icon">
        <i class="fas fa-prescription-bottle-alt fa-3x"></i>
        <h1>Gerenciamento de Dispensação</h1>
    </div>
    <div class="col-auto">
        <button type="button" class="btn btn-success top-right-button"
                onclick="location.href='/DispensacaoCadastro'">
            Cadastro de Dispensação
        </button>
    </div>
</div>
<hr />
<div class="table-container">
    <div class="table-responsive">
        <table id="tabelaDispensacao" class="table table-striped table-hover table-bordered">
            <thead class="table-dark">
                <tr>
                    <th scope="col">Código</th>
                    <th scope="col">Nome do Paciente</th>
                    <th scope="col">CID</th>
                    <th scope="col">Início APAC</th>
                    <th scope="col">Fim APAC</th>
                    <th scope="col">Observação</th>
                    <th scope="col">Status</th>
                    <th scope="col">Ações</th>
                </tr>
            </thead>
            <tbody id="tabela">
            </tbody>
        </table>
    </div>
</div>
<div id="loading" style="display: none; text-align: center;">
    <div class="spinner-border" role="status">
        <span class="visually-hidden">Carregando...</span>
    </div>
</div>
<table style="display:none">
    <tr id="linhaExemplo">
        <th scope="row" class="codigo"></th> <!-- Aqui o código da dispensação -->
        <td class="nomePaciente"></td>
        <td class="cid"></td>
        <td class="inicioApac"></td>
        <td class="fimApac"></td>
        <td class="observacao"></td>
        <td class="status">
            <select class="form-select alterar-status">
                <!-- Os status serão carregados dinamicamente -->
            </select>
        </td>
        <td>
            <a href="#" class="alterar btn btn-info btn-sm">
                <i class="fas fa-eye"></i> Visualizar
            </a>
        </td>
    </tr>
</table>

<div class="mt-3">
    <button type="button" class="btn btn-primary" onclick="location.href='/index'">Voltar</button>
</div>

@section Scripts
{
    <script src="~/js/Dispensacao.js"></script>
}
